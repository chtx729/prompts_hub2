<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‰é’®å¯¹é½å’Œé¢œè‰²ä¿®å¤éªŒè¯</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: var(--background-color);
        }
        .test-container {
            background: var(--surface-color);
            padding: 2rem;
            border-radius: var(--radius-xl);
            margin-bottom: 2rem;
        }
        .test-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            cursor: pointer;
            margin: 0.5rem;
        }
        .test-button:hover {
            background: var(--primary-hover);
        }
        .fix-box {
            background: var(--success-50);
            border: 1px solid var(--success-200);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin: 1rem 0;
        }
        .demo-card {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: white;
            margin: 1rem 0;
            overflow: hidden;
        }
        .demo-card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .demo-card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .demo-card-title:hover {
            color: var(--primary-color);
        }
        .demo-card-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
        }
        .alignment-guide {
            background: repeating-linear-gradient(
                to right,
                #ff0000 0px,
                #ff0000 1px,
                transparent 1px,
                transparent 10px
            );
            height: 2px;
            margin: 1rem 0;
            position: relative;
        }
        .alignment-guide::before {
            content: "å¯¹é½å‚è€ƒçº¿";
            position: absolute;
            left: 0;
            top: -20px;
            font-size: 12px;
            color: #ff0000;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/api.js"></script>
    <script src="js/myspace.js"></script>
    <script src="js/prompts.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ æŒ‰é’®å¯¹é½å’Œé¢œè‰²ä¿®å¤éªŒè¯</h1>
        <p>éªŒè¯æ‰€æœ‰æŒ‰é’®åœ¨åŒä¸€æ°´å¹³çº¿ä¸Šä¸”é¢œè‰²ç»Ÿä¸€ä¸ºç´«è‰²</p>
    </div>

    <div class="test-container">
        <h3>ä¿®å¤å†…å®¹</h3>
        
        <div class="fix-box">
            <h4>âœ… å…³é”®ä¿®å¤</h4>
            <ul>
                <li><strong>é‡æ„æŒ‰é’®å¸ƒå±€</strong>ï¼šæ‰€æœ‰æŒ‰é’®æ”¾åœ¨åŒä¸€ä¸ªå®¹å™¨ä¸­</li>
                <li><strong>ç»Ÿä¸€CSSç±»</strong>ï¼šä½¿ç”¨my-space-btnç±»ç¡®ä¿æ ·å¼ä¸€è‡´</li>
                <li><strong>å¼ºåˆ¶ç´«è‰²ä¸»é¢˜</strong>ï¼šä½¿ç”¨!importantç¡®ä¿æ ·å¼ä¼˜å…ˆçº§</li>
                <li><strong>æ°´å¹³å¯¹é½</strong>ï¼šä½¿ç”¨flexboxç¡®ä¿æŒ‰é’®åœ¨åŒä¸€æ°´å¹³çº¿</li>
            </ul>
        </div>
    </div>

    <div class="test-container">
        <h3>æŒ‰é’®å¯¹é½æ¼”ç¤º</h3>
        
        <div class="alignment-guide"></div>
        
        <div class="demo-card">
            <div class="demo-card-header">
                <div class="demo-card-title" onclick="alert('ç‚¹å‡»æ ‡é¢˜æŸ¥çœ‹è¯¦æƒ…ï¼')">
                    æˆ‘åˆ›å»ºçš„æç¤ºè¯ç¤ºä¾‹ï¼ˆç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼‰
                </div>
                <div class="demo-card-description">
                    éªŒè¯æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤æŒ‰é’®æ˜¯å¦åœ¨åŒä¸€æ°´å¹³çº¿ä¸Šä¸”é¢œè‰²ç»Ÿä¸€...
                </div>
            </div>
            <div class="prompt-card-actions" style="display: flex; justify-content: flex-end; align-items: center; gap: var(--space-1); padding: var(--space-3) var(--space-4); background: var(--surface-color);">
                <button class="btn my-space-btn view-prompt-btn" onclick="alert('æŸ¥çœ‹æŒ‰é’®ç‚¹å‡»ï¼')">
                    <i class="fas fa-eye"></i> æŸ¥çœ‹
                </button>
                <button class="btn my-space-btn edit-prompt-btn" onclick="alert('ç¼–è¾‘æŒ‰é’®ç‚¹å‡»ï¼')">
                    <i class="fas fa-edit"></i> ç¼–è¾‘
                </button>
                <button class="btn my-space-btn btn-danger delete-prompt-btn" onclick="alert('åˆ é™¤æŒ‰é’®ç‚¹å‡»ï¼')">
                    <i class="fas fa-trash"></i> åˆ é™¤
                </button>
            </div>
        </div>

        <div class="alignment-guide"></div>

        <div class="demo-card">
            <div class="demo-card-header">
                <div class="demo-card-title" onclick="alert('ç‚¹å‡»æ ‡é¢˜æŸ¥çœ‹è¯¦æƒ…ï¼')">
                    æˆ‘æ”¶è—çš„æç¤ºè¯ç¤ºä¾‹ï¼ˆç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼‰
                </div>
                <div class="demo-card-description">
                    éªŒè¯æŸ¥çœ‹ã€å–æ¶ˆæ”¶è—æŒ‰é’®æ˜¯å¦åœ¨åŒä¸€æ°´å¹³çº¿ä¸Šä¸”é¢œè‰²ç»Ÿä¸€...
                </div>
            </div>
            <div class="prompt-card-actions" style="display: flex; justify-content: flex-end; align-items: center; gap: var(--space-1); padding: var(--space-3) var(--space-4); background: var(--surface-color);">
                <button class="btn my-space-btn view-prompt-btn" onclick="alert('æŸ¥çœ‹æŒ‰é’®ç‚¹å‡»ï¼')">
                    <i class="fas fa-eye"></i> æŸ¥çœ‹
                </button>
                <button class="btn my-space-btn unfavorite-prompt-btn" onclick="alert('å–æ¶ˆæ”¶è—æŒ‰é’®ç‚¹å‡»ï¼')">
                    <i class="fas fa-heart-broken"></i> å–æ¶ˆæ”¶è—
                </button>
            </div>
        </div>

        <div class="alignment-guide"></div>
    </div>

    <div class="test-container">
        <h3>æŠ€æœ¯å®ç°</h3>
        
        <div class="fix-box">
            <h4>ğŸ”§ å…³é”®æŠ€æœ¯ç‚¹</h4>
            <ul>
                <li><strong>HTMLç»“æ„é‡æ„</strong>ï¼šæ›¿æ¢æ•´ä¸ªæŒ‰é’®å®¹å™¨è€Œä¸æ˜¯è¿½åŠ </li>
                <li><strong>CSSä¼˜å…ˆçº§</strong>ï¼šä½¿ç”¨!importantç¡®ä¿æ ·å¼ç”Ÿæ•ˆ</li>
                <li><strong>Flexboxå¸ƒå±€</strong>ï¼šalign-items: centerç¡®ä¿å‚ç›´å¯¹é½</li>
                <li><strong>ç»Ÿä¸€ç±»å</strong>ï¼šmy-space-btnç±»ç»Ÿä¸€æ‰€æœ‰æŒ‰é’®æ ·å¼</li>
            </ul>
        </div>

        <div style="background: var(--gray-50); padding: 1rem; border-radius: var(--radius-md); font-family: monospace; font-size: 12px;">
            <strong>CSSå…³é”®ä»£ç ï¼š</strong><br>
            .my-space-btn {<br>
            &nbsp;&nbsp;background: linear-gradient(...) !important;<br>
            &nbsp;&nbsp;height: 32px;<br>
            &nbsp;&nbsp;display: inline-flex;<br>
            &nbsp;&nbsp;align-items: center;<br>
            }<br><br>
            .prompt-card-actions {<br>
            &nbsp;&nbsp;display: flex;<br>
            &nbsp;&nbsp;align-items: center;<br>
            &nbsp;&nbsp;justify-content: flex-end;<br>
            }
        </div>
    </div>

    <div class="test-container">
        <h3>åŠŸèƒ½éªŒè¯</h3>
        
        <button class="test-button" onclick="testButtonAlignment()">æµ‹è¯•æŒ‰é’®å¯¹é½</button>
        <button class="test-button" onclick="testButtonColors()">æµ‹è¯•æŒ‰é’®é¢œè‰²</button>
        <button class="test-button" onclick="testButtonSizes()">æµ‹è¯•æŒ‰é’®å°ºå¯¸</button>
        <button class="test-button" onclick="goToMySpace()">å‰å¾€æˆ‘çš„ç©ºé—´å®é™…æµ‹è¯•</button>
        
        <div id="test-results" style="margin-top: 1rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-md); display: none;">
            <h4>æµ‹è¯•ç»“æœ</h4>
            <div id="test-output"></div>
        </div>
    </div>

    <script>
        function showTestResults(title, results) {
            const resultsDiv = document.getElementById('test-results');
            const outputDiv = document.getElementById('test-output');
            
            outputDiv.innerHTML = `<h5>${title}</h5><ul>${results.map(r => `<li>${r}</li>`).join('')}</ul>`;
            resultsDiv.style.display = 'block';
        }

        function testButtonAlignment() {
            console.log('=== æµ‹è¯•æŒ‰é’®å¯¹é½ ===');
            
            const buttons = document.querySelectorAll('.my-space-btn');
            const results = [];
            
            if (buttons.length === 0) {
                results.push('âŒ æ‰¾ä¸åˆ°my-space-btnæŒ‰é’®');
                showTestResults('æŒ‰é’®å¯¹é½æµ‹è¯•', results);
                return;
            }
            
            const positions = Array.from(buttons).map(btn => {
                const rect = btn.getBoundingClientRect();
                return {
                    element: btn,
                    top: rect.top,
                    bottom: rect.bottom,
                    height: rect.height
                };
            });
            
            const firstTop = positions[0].top;
            const tolerance = 2; // å…è®¸2pxè¯¯å·®
            
            let allAligned = true;
            positions.forEach((pos, index) => {
                const aligned = Math.abs(pos.top - firstTop) <= tolerance;
                const result = `æŒ‰é’®${index + 1}: top=${pos.top.toFixed(1)}, height=${pos.height} ${aligned ? 'âœ…' : 'âŒ'}`;
                results.push(result);
                if (!aligned) allAligned = false;
            });
            
            results.push(allAligned ? 'âœ… æ‰€æœ‰æŒ‰é’®å¯¹é½æ­£ç¡®' : 'âŒ æŒ‰é’®å¯¹é½æœ‰é—®é¢˜');
            showTestResults('æŒ‰é’®å¯¹é½æµ‹è¯•', results);
        }

        function testButtonColors() {
            console.log('=== æµ‹è¯•æŒ‰é’®é¢œè‰² ===');
            
            const buttons = document.querySelectorAll('.my-space-btn');
            const results = [];
            
            if (buttons.length === 0) {
                results.push('âŒ æ‰¾ä¸åˆ°my-space-btnæŒ‰é’®');
                showTestResults('æŒ‰é’®é¢œè‰²æµ‹è¯•', results);
                return;
            }
            
            buttons.forEach((btn, index) => {
                const styles = getComputedStyle(btn);
                const background = styles.background;
                const color = styles.color;
                
                const isPurple = background.includes('linear-gradient') && 
                    (background.includes('147, 51, 234') || background.includes('primary'));
                const isRed = btn.classList.contains('btn-danger') && 
                    (background.includes('239, 68, 68') || background.includes('error'));
                const isWhiteText = color.includes('255, 255, 255') || color.includes('white');
                
                let status = 'âŒ';
                if (btn.classList.contains('btn-danger')) {
                    status = isRed && isWhiteText ? 'âœ…' : 'âŒ';
                    results.push(`åˆ é™¤æŒ‰é’®${index + 1}: ${status} ${isRed ? 'çº¢è‰²èƒŒæ™¯' : 'éçº¢è‰²èƒŒæ™¯'}, ${isWhiteText ? 'ç™½è‰²æ–‡å­—' : 'éç™½è‰²æ–‡å­—'}`);
                } else {
                    status = isPurple && isWhiteText ? 'âœ…' : 'âŒ';
                    results.push(`æŒ‰é’®${index + 1}: ${status} ${isPurple ? 'ç´«è‰²èƒŒæ™¯' : 'éç´«è‰²èƒŒæ™¯'}, ${isWhiteText ? 'ç™½è‰²æ–‡å­—' : 'éç™½è‰²æ–‡å­—'}`);
                }
            });
            
            showTestResults('æŒ‰é’®é¢œè‰²æµ‹è¯•', results);
        }

        function testButtonSizes() {
            console.log('=== æµ‹è¯•æŒ‰é’®å°ºå¯¸ ===');
            
            const buttons = document.querySelectorAll('.my-space-btn');
            const results = [];
            
            if (buttons.length === 0) {
                results.push('âŒ æ‰¾ä¸åˆ°my-space-btnæŒ‰é’®');
                showTestResults('æŒ‰é’®å°ºå¯¸æµ‹è¯•', results);
                return;
            }
            
            const expectedHeight = 32;
            let allCorrectHeight = true;
            
            buttons.forEach((btn, index) => {
                const rect = btn.getBoundingClientRect();
                const height = Math.round(rect.height);
                const correct = height === expectedHeight;
                
                results.push(`æŒ‰é’®${index + 1}: é«˜åº¦${height}px ${correct ? 'âœ…' : 'âŒ'}`);
                if (!correct) allCorrectHeight = false;
            });
            
            results.push(allCorrectHeight ? 'âœ… æ‰€æœ‰æŒ‰é’®é«˜åº¦æ­£ç¡®' : 'âŒ æŒ‰é’®é«˜åº¦æœ‰é—®é¢˜');
            showTestResults('æŒ‰é’®å°ºå¯¸æµ‹è¯•', results);
        }

        function goToMySpace() {
            console.log('è·³è½¬åˆ°æˆ‘çš„ç©ºé—´é¡µé¢è¿›è¡Œå®é™…æµ‹è¯•...');
            alert('å³å°†è·³è½¬åˆ°æˆ‘çš„ç©ºé—´é¡µé¢\n\nè¯·éªŒè¯ï¼š\n1. æ‰€æœ‰æŒ‰é’®æ˜¯å¦åœ¨åŒä¸€æ°´å¹³çº¿ä¸Š\n2. æŸ¥çœ‹ã€ç¼–è¾‘ã€å–æ¶ˆæ”¶è—æŒ‰é’®æ˜¯å¦ä¸ºç´«è‰²\n3. åˆ é™¤æŒ‰é’®æ˜¯å¦ä¸ºçº¢è‰²\n4. æŒ‰é’®é«˜åº¦æ˜¯å¦ä¸€è‡´');
            window.location.href = 'index.html#my-space';
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æµ‹è¯•
        document.addEventListener('DOMContentLoaded', () => {
            console.log('æŒ‰é’®å¯¹é½å’Œé¢œè‰²ä¿®å¤éªŒè¯é¡µé¢åŠ è½½å®Œæˆ');
            
            setTimeout(() => {
                console.log('å¼€å§‹è‡ªåŠ¨æµ‹è¯•...');
                testButtonAlignment();
            }, 1000);
        });
    </script>
</body>
</html>
