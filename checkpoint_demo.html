<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkpointå›é€€æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            display: flex;
            gap: 20px;
        }
        .content {
            flex: 2;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
            background-color: #f9f9f9;
        }
        .history {
            flex: 1;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            max-height: 500px;
            overflow-y: auto;
        }
        .checkpoint {
            padding: 8px;
            margin-bottom: 5px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .checkpoint:hover {
            background-color: #f0f0f0;
        }
        .checkpoint.active {
            background-color: #e6f7ff;
            border-left: 3px solid #1890ff;
        }
        .checkpoint-icon {
            margin-right: 8px;
            font-size: 16px;
        }
        .revert-info {
            font-size: 12px;
            color: #888;
            margin-left: 24px;
        }
        button {
            padding: 8px 16px;
            background-color: #1890ff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #40a9ff;
        }
        .controls {
            margin-bottom: 20px;
        }
        .explanation {
            background-color: #fffbe6;
            border: 1px solid #ffe58f;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .content-text {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <h1>Checkpointå›é€€æ¼”ç¤º</h1>
    
    <div class="explanation">
        <h3>æ¼”ç¤ºè¯´æ˜</h3>
        <p>è¿™ä¸ªé¡µé¢æ¨¡æ‹Ÿäº†Augmentçš„checkpointç³»ç»Ÿå·¥ä½œæ–¹å¼ã€‚æ¯æ¬¡ä½ ä¿®æ”¹å†…å®¹æˆ–å›é€€åˆ°ä¹‹å‰çš„checkpointï¼Œç³»ç»Ÿéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„checkpointï¼Œè€Œä¸æ˜¯ç›´æ¥è¦†ç›–å½“å‰çŠ¶æ€ã€‚</p>
        <p>å·¦ä¾§æ˜¯å†…å®¹åŒºåŸŸï¼Œå³ä¾§æ˜¯checkpointå†å²è®°å½•ã€‚å°è¯•ä¿®æ”¹å†…å®¹å¹¶åˆ›å»ºæ–°çš„checkpointï¼Œç„¶åå°è¯•å›é€€åˆ°ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œè§‚å¯Ÿç³»ç»Ÿçš„è¡Œä¸ºã€‚</p>
    </div>
    
    <div class="controls">
        <button id="saveBtn">ä¿å­˜å½“å‰å†…å®¹ä¸ºæ–°Checkpoint</button>
        <button id="resetBtn">é‡ç½®æ¼”ç¤º</button>
    </div>
    
    <div class="container">
        <div class="content">
            <h3>å½“å‰å†…å®¹ (Checkpoint <span id="currentCheckpoint">1</span>)</h3>
            <div class="content-text" id="contentText">
                è¿™æ˜¯åˆå§‹å†…å®¹ã€‚
                <br><br>
                ä½ å¯ä»¥ç¼–è¾‘è¿™æ®µæ–‡å­—ï¼Œç„¶åç‚¹å‡»"ä¿å­˜å½“å‰å†…å®¹ä¸ºæ–°Checkpoint"æŒ‰é’®åˆ›å»ºä¸€ä¸ªæ–°çš„æ£€æŸ¥ç‚¹ã€‚
                <br><br>
                ä¹‹åï¼Œä½ å¯ä»¥ç‚¹å‡»å³ä¾§çš„ä»»ä½•æ£€æŸ¥ç‚¹æ¥å›é€€åˆ°é‚£ä¸ªç‰ˆæœ¬ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ£€æŸ¥ç‚¹è€Œä¸æ˜¯ç›´æ¥è·³å›å»ã€‚
            </div>
            <button id="editBtn">ç¼–è¾‘å†…å®¹</button>
        </div>
        
        <div class="history">
            <h3>Checkpointå†å²</h3>
            <div id="checkpointList">
                <div class="checkpoint active" data-id="1">
                    <span class="checkpoint-icon">ğŸ“Œ</span> Checkpoint 1
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // å­˜å‚¨æ‰€æœ‰checkpointçš„å†…å®¹
        const checkpoints = [
            {
                id: 1,
                content: document.getElementById('contentText').innerHTML,
                revertedFrom: null
            }
        ];
        
        let currentCheckpointId = 1;
        
        // ä¿å­˜æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('saveBtn').addEventListener('click', function() {
            const newId = checkpoints.length + 1;
            const newContent = document.getElementById('contentText').innerHTML;
            
            // åˆ›å»ºæ–°çš„checkpoint
            checkpoints.push({
                id: newId,
                content: newContent,
                revertedFrom: null
            });
            
            // æ›´æ–°å½“å‰checkpoint
            currentCheckpointId = newId;
            document.getElementById('currentCheckpoint').textContent = newId;
            
            // æ›´æ–°å†å²è®°å½•
            updateCheckpointList();
        });
        
        // ç¼–è¾‘æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('editBtn').addEventListener('click', function() {
            const contentElement = document.getElementById('contentText');
            const currentContent = contentElement.innerHTML;
            
            // åˆ›å»ºä¸€ä¸ªç®€å•çš„ç¼–è¾‘ç•Œé¢
            const textarea = document.createElement('textarea');
            textarea.style.width = '100%';
            textarea.style.height = '200px';
            textarea.style.marginBottom = '10px';
            textarea.value = currentContent.replace(/<br>/g, '\n');
            
            const saveEditBtn = document.createElement('button');
            saveEditBtn.textContent = 'ä¿å­˜ç¼–è¾‘';
            saveEditBtn.addEventListener('click', function() {
                contentElement.innerHTML = textarea.value.replace(/\n/g, '<br>');
                contentElement.style.display = 'block';
                document.getElementById('editBtn').style.display = 'inline-block';
                textarea.remove();
                saveEditBtn.remove();
                cancelEditBtn.remove();
            });
            
            const cancelEditBtn = document.createElement('button');
            cancelEditBtn.textContent = 'å–æ¶ˆ';
            cancelEditBtn.addEventListener('click', function() {
                contentElement.style.display = 'block';
                document.getElementById('editBtn').style.display = 'inline-block';
                textarea.remove();
                saveEditBtn.remove();
                cancelEditBtn.remove();
            });
            
            contentElement.style.display = 'none';
            document.getElementById('editBtn').style.display = 'none';
            contentElement.parentNode.insertBefore(textarea, contentElement);
            contentElement.parentNode.insertBefore(saveEditBtn, contentElement);
            contentElement.parentNode.insertBefore(cancelEditBtn, contentElement);
        });
        
        // é‡ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        document.getElementById('resetBtn').addEventListener('click', function() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ¼”ç¤ºå—ï¼Ÿæ‰€æœ‰checkpointå°†è¢«æ¸…é™¤ã€‚')) {
                // ä¿ç•™ç¬¬ä¸€ä¸ªcheckpoint
                checkpoints.splice(1);
                currentCheckpointId = 1;
                document.getElementById('currentCheckpoint').textContent = '1';
                document.getElementById('contentText').innerHTML = checkpoints[0].content;
                updateCheckpointList();
            }
        });
        
        // æ›´æ–°checkpointåˆ—è¡¨
        function updateCheckpointList() {
            const listElement = document.getElementById('checkpointList');
            listElement.innerHTML = '';
            
            checkpoints.forEach(checkpoint => {
                const checkpointElement = document.createElement('div');
                checkpointElement.className = 'checkpoint' + (checkpoint.id === currentCheckpointId ? ' active' : '');
                checkpointElement.dataset.id = checkpoint.id;
                
                let html = `<span class="checkpoint-icon">ğŸ“Œ</span> Checkpoint ${checkpoint.id}`;
                
                if (checkpoint.revertedFrom !== null) {
                    html += `<div class="revert-info">Reverted to Checkpoint ${checkpoint.revertedFrom}</div>`;
                }
                
                checkpointElement.innerHTML = html;
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                checkpointElement.addEventListener('click', function() {
                    revertToCheckpoint(checkpoint.id);
                });
                
                listElement.appendChild(checkpointElement);
            });
        }
        
        // å›é€€åˆ°æŒ‡å®šcheckpoint
        function revertToCheckpoint(checkpointId) {
            // å¦‚æœç‚¹å‡»çš„æ˜¯å½“å‰checkpointï¼Œä¸åšä»»ä½•æ“ä½œ
            if (checkpointId === currentCheckpointId) return;
            
            const targetCheckpoint = checkpoints.find(cp => cp.id === checkpointId);
            if (!targetCheckpoint) return;
            
            // åˆ›å»ºä¸€ä¸ªæ–°çš„checkpointï¼Œå†…å®¹æ˜¯ç›®æ ‡checkpointçš„å†…å®¹
            const newId = checkpoints.length + 1;
            checkpoints.push({
                id: newId,
                content: targetCheckpoint.content,
                revertedFrom: checkpointId
            });
            
            // æ›´æ–°å½“å‰checkpoint
            currentCheckpointId = newId;
            document.getElementById('currentCheckpoint').textContent = newId;
            document.getElementById('contentText').innerHTML = targetCheckpoint.content;
            
            // æ›´æ–°å†å²è®°å½•
            updateCheckpointList();
        }
    </script>
</body>
</html>