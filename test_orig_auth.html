<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸä½œè€…å­—æ®µåŠŸèƒ½æµ‹è¯•</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            background: var(--background-color);
        }
        .test-container {
            background: var(--surface-color);
            padding: 2rem;
            border-radius: var(--radius-xl);
            margin-bottom: 2rem;
        }
        .test-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
        }
        .test-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            cursor: pointer;
            margin: 0.5rem;
        }
        .test-button:hover {
            background: var(--primary-hover);
        }
        .demo-card {
            max-width: 400px;
            margin: 1rem 0;
        }
        .demo-detail {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            margin: 1rem 0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/ui.js"></script>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ‘¤ åŸä½œè€…å­—æ®µåŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•æç¤ºè¯åˆ›å»ºè¡¨å•å’Œæ˜¾ç¤ºä¸­çš„åŸä½œè€…å­—æ®µåŠŸèƒ½</p>
    </div>

    <div class="test-container">
        <div class="test-section">
            <h3>1. è¡¨å•å¸ƒå±€æµ‹è¯•</h3>
            <p>æµ‹è¯•æ ‡é¢˜å’ŒåŸä½œè€…å­—æ®µçš„å¹¶æ’å¸ƒå±€</p>
            
            <form id="test-form">
                <div class="form-row">
                    <div class="form-group form-group-flex">
                        <label for="test-title">æ ‡é¢˜ *</label>
                        <input type="text" id="test-title" required maxlength="200" value="æµ‹è¯•æç¤ºè¯æ ‡é¢˜">
                    </div>
                    <div class="form-group form-group-flex">
                        <label for="test-orig-auth">åŸä½œè€…</label>
                        <input type="text" id="test-orig-auth" maxlength="100" placeholder="é€‰å¡«" value="å¼ ä¸‰">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="test-description">æè¿°</label>
                    <textarea id="test-description" rows="3">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æç¤ºè¯çš„æè¿°</textarea>
                </div>
                
                <button type="button" class="test-button" onclick="generatePreview()">ç”Ÿæˆé¢„è§ˆ</button>
                <button type="button" class="test-button" onclick="clearForm()">æ¸…ç©ºè¡¨å•</button>
            </form>
        </div>

        <div class="test-section">
            <h3>2. æç¤ºè¯å¡ç‰‡é¢„è§ˆ</h3>
            <p>é¢„è§ˆåŸä½œè€…ä¿¡æ¯åœ¨æç¤ºè¯å¡ç‰‡ä¸­çš„æ˜¾ç¤ºæ•ˆæœ</p>
            <div id="card-preview"></div>
        </div>

        <div class="test-section">
            <h3>3. æç¤ºè¯è¯¦æƒ…é¢„è§ˆ</h3>
            <p>é¢„è§ˆåŸä½œè€…ä¿¡æ¯åœ¨æç¤ºè¯è¯¦æƒ…é¡µé¢ä¸­çš„æ˜¾ç¤ºæ•ˆæœ</p>
            <div id="detail-preview"></div>
        </div>

        <div class="test-section">
            <h3>4. å“åº”å¼æµ‹è¯•</h3>
            <p>è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°ï¼Œæµ‹è¯•ç§»åŠ¨ç«¯çš„å‚ç›´å¸ƒå±€</p>
            <div style="background: var(--warning-50); padding: 1rem; border-radius: var(--radius-lg); border: 1px solid var(--warning-200);">
                <p><strong>æµ‹è¯•è¯´æ˜ï¼š</strong></p>
                <ul>
                    <li>æ¡Œé¢ç«¯ï¼šæ ‡é¢˜å’ŒåŸä½œè€…å­—æ®µåº”è¯¥å¹¶æ’æ˜¾ç¤º</li>
                    <li>ç§»åŠ¨ç«¯ï¼ˆçª—å£å®½åº¦ < 768pxï¼‰ï¼šå­—æ®µåº”è¯¥å‚ç›´å †å </li>
                    <li>åŸä½œè€…å­—æ®µä¸ºé€‰å¡«ï¼Œå¯ä»¥ä¸ºç©º</li>
                    <li>åŸä½œè€…ä¿¡æ¯åº”è¯¥åœ¨å¡ç‰‡å’Œè¯¦æƒ…ä¸­æ­£ç¡®æ˜¾ç¤º</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function generatePreview() {
            const title = document.getElementById('test-title').value;
            const origAuth = document.getElementById('test-orig-auth').value;
            const description = document.getElementById('test-description').value;

            // åˆ›å»ºæµ‹è¯•æ•°æ®
            const testPrompt = {
                prompt_id: 1,
                title: title,
                orig_auth: origAuth,
                description: description,
                content: 'è¿™æ˜¯æµ‹è¯•æç¤ºè¯çš„å†…å®¹...',
                tags: ['æµ‹è¯•', 'ç¤ºä¾‹'],
                view_count: 123,
                use_count: 45,
                like_count: 12,
                favorite_count: 8,
                created_at: new Date().toISOString(),
                categories: {
                    name: 'æµ‹è¯•åˆ†ç±»',
                    color: '#4f46e5',
                    icon: 'fas fa-test'
                },
                author_name: 'æµ‹è¯•ç”¨æˆ·',
                author_avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=test'
            };

            // ç”Ÿæˆå¡ç‰‡é¢„è§ˆ
            if (typeof UI !== 'undefined' && typeof UI.createPromptCard === 'function') {
                const cardPreview = document.getElementById('card-preview');
                cardPreview.innerHTML = '';
                const card = UI.createPromptCard(testPrompt);
                card.classList.add('demo-card');
                cardPreview.appendChild(card);
            } else {
                document.getElementById('card-preview').innerHTML = '<p style="color: var(--error-500);">UI.createPromptCard æ–¹æ³•ä¸å¯ç”¨</p>';
            }

            // ç”Ÿæˆè¯¦æƒ…é¢„è§ˆ
            const detailPreview = document.getElementById('detail-preview');
            detailPreview.innerHTML = `
                <div class="demo-detail">
                    <div class="prompt-detail-content">
                        <div class="prompt-meta">
                            <span class="prompt-category" style="background-color: #4f46e5">
                                <i class="fas fa-tag"></i>
                                æµ‹è¯•åˆ†ç±»
                            </span>
                            <span class="prompt-date">${new Date().toLocaleDateString()}</span>
                        </div>
                        
                        <h1 class="prompt-title">${escapeHtml(title)}</h1>
                        
                        ${origAuth ? `
                            <div class="prompt-orig-auth">
                                <i class="fas fa-user-edit"></i>
                                <span>åŸä½œè€…ï¼š${escapeHtml(origAuth)}</span>
                            </div>
                        ` : ''}
                        
                        ${description ? `
                            <p class="prompt-description">${escapeHtml(description)}</p>
                        ` : ''}
                        
                        <div class="prompt-stats-detail">
                            <div class="stat-item">
                                <i class="fas fa-eye"></i>
                                <span>æµè§ˆ 123</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-copy"></i>
                                <span>ä½¿ç”¨ 45</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-heart"></i>
                                <span>ç‚¹èµ 12</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            console.log('é¢„è§ˆå·²ç”Ÿæˆ');
            console.log('æµ‹è¯•æ•°æ®:', testPrompt);
        }

        function clearForm() {
            document.getElementById('test-form').reset();
            document.getElementById('card-preview').innerHTML = '';
            document.getElementById('detail-preview').innerHTML = '';
            console.log('è¡¨å•å·²æ¸…ç©º');
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // é¡µé¢åŠ è½½å®Œæˆåç”Ÿæˆåˆå§‹é¢„è§ˆ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('åŸä½œè€…å­—æ®µæµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            console.log('UIå¯¹è±¡:', typeof UI);
            console.log('UI.createPromptCard:', typeof UI?.createPromptCard);
            
            // ç”Ÿæˆåˆå§‹é¢„è§ˆ
            generatePreview();
        });
    </script>
</body>
</html>
