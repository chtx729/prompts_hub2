<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的空间UI修复验证</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            background: var(--background-color);
        }
        .test-container {
            background: var(--surface-color);
            padding: 2rem;
            border-radius: var(--radius-xl);
            margin-bottom: 2rem;
        }
        .test-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            cursor: pointer;
            margin: 0.5rem;
        }
        .test-button:hover {
            background: var(--primary-hover);
        }
        .improvement-box {
            background: var(--success-50);
            border: 1px solid var(--success-200);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin: 1rem 0;
        }
        .demo-section {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin: 1rem 0;
        }
        .demo-card {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            background: white;
            margin: 1rem 0;
            overflow: hidden;
        }
        .demo-card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
        }
        .demo-card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text-primary);
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .demo-card-title:hover {
            color: var(--primary-color);
        }
        .demo-card-description {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
        }
        .demo-card-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--surface-color);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/api.js"></script>
    <script src="js/myspace.js"></script>
    <script src="js/prompts.js"></script>
    <script src="js/main.js"></script>
</head>
<body>
    <div class="test-container">
        <h1>🎨 我的空间UI修复验证</h1>
        <p>验证按钮样式、搜索框美化和排序控件位置调整</p>
    </div>

    <div class="test-container">
        <h3>修复内容</h3>
        
        <div class="improvement-box">
            <h4>✅ 修复1：按钮样式统一</h4>
            <ul>
                <li>所有操作按钮改为紫色主题，与"创建提示词"按钮一致</li>
                <li>包括查看、编辑、删除、取消收藏按钮</li>
                <li>保持删除按钮的红色警告样式</li>
            </ul>
        </div>

        <div class="improvement-box">
            <h4>✅ 修复2：搜索框美化</h4>
            <ul>
                <li>调整搜索框宽度和高度，提升视觉效果</li>
                <li>美化搜索按钮，统一紫色主题</li>
                <li>添加阴影和聚焦效果</li>
            </ul>
        </div>

        <div class="improvement-box">
            <h4>✅ 修复3：排序控件位置调整</h4>
            <ul>
                <li>排序下拉列表不再紧贴右侧区域</li>
                <li>增加右侧边距，视觉更平衡</li>
                <li>美化下拉列表样式</li>
            </ul>
        </div>
    </div>

    <div class="test-container">
        <h3>搜索和排序控件演示</h3>
        
        <div class="demo-section">
            <h4>新的搜索和排序布局</h4>
            <div class="my-space-section-header">
                <div class="search-box-small">
                    <input type="text" placeholder="搜索我的提示词..." value="">
                    <button onclick="alert('搜索功能演示')">
                        <i class="fas fa-search"></i>
                        搜索
                    </button>
                </div>
                <div class="sort-controls">
                    <select onchange="alert('排序功能演示')">
                        <option value="created_at">最新发布</option>
                        <option value="view_count">浏览量</option>
                        <option value="use_count">使用量</option>
                        <option value="like_count">点赞量</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h3>按钮样式演示</h3>
        
        <div class="demo-card">
            <div class="demo-card-header">
                <div class="demo-card-title" onclick="alert('点击标题查看详情！')">
                    我创建的提示词示例（点击查看详情）
                </div>
                <div class="demo-card-description">
                    这是一个我创建的提示词示例，展示了新的按钮样式...
                </div>
            </div>
            <div class="demo-card-actions">
                <button class="btn view-prompt-btn" onclick="alert('查看按钮点击！')">
                    <i class="fas fa-eye"></i> 查看
                </button>
                <div class="my-prompt-actions">
                    <button class="btn" onclick="alert('编辑按钮点击！')">
                        <i class="fas fa-edit"></i> 编辑
                    </button>
                    <button class="btn btn-danger" onclick="alert('删除按钮点击！')">
                        <i class="fas fa-trash"></i> 删除
                    </button>
                </div>
            </div>
        </div>

        <div class="demo-card">
            <div class="demo-card-header">
                <div class="demo-card-title" onclick="alert('点击标题查看详情！')">
                    我收藏的提示词示例（点击查看详情）
                </div>
                <div class="demo-card-description">
                    这是一个我收藏的提示词示例，展示了取消收藏按钮样式...
                </div>
            </div>
            <div class="demo-card-actions">
                <button class="btn view-prompt-btn" onclick="alert('查看按钮点击！')">
                    <i class="fas fa-eye"></i> 查看
                </button>
                <div class="my-prompt-actions">
                    <button class="btn" onclick="alert('取消收藏按钮点击！')">
                        <i class="fas fa-heart-broken"></i> 取消收藏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="test-container">
        <h3>功能验证</h3>
        
        <div class="improvement-box">
            <h4>🔍 验证要点</h4>
            <ul>
                <li><strong>按钮颜色</strong>：所有操作按钮使用紫色主题</li>
                <li><strong>搜索框</strong>：宽度适中，高度统一，有阴影效果</li>
                <li><strong>排序控件</strong>：不紧贴右侧，有适当边距</li>
                <li><strong>功能完整</strong>：所有交互功能保持正常</li>
            </ul>
        </div>

        <button class="test-button" onclick="testButtonStyles()">测试按钮样式</button>
        <button class="test-button" onclick="testSearchBox()">测试搜索框</button>
        <button class="test-button" onclick="testSortControls()">测试排序控件</button>
        <button class="test-button" onclick="goToMySpace()">前往我的空间实际测试</button>
    </div>

    <script>
        function testButtonStyles() {
            console.log('=== 测试按钮样式 ===');
            
            // 检查CSS变量
            const styles = getComputedStyle(document.documentElement);
            const primaryColor = styles.getPropertyValue('--primary-600').trim();
            const primaryHover = styles.getPropertyValue('--primary-700').trim();
            
            console.log('primary-600:', primaryColor);
            console.log('primary-700:', primaryHover);
            
            // 检查按钮样式类
            const myPromptActions = document.querySelector('.my-prompt-actions');
            if (myPromptActions) {
                const buttonStyles = getComputedStyle(myPromptActions.querySelector('.btn'));
                console.log('按钮背景:', buttonStyles.background);
                console.log('按钮颜色:', buttonStyles.color);
                
                alert('✅ 按钮样式测试通过\n\n- 使用紫色主题\n- 渐变背景效果\n- 悬浮动画效果\n- 删除按钮保持红色警告样式');
            } else {
                alert('❌ 找不到按钮样式元素');
            }
        }

        function testSearchBox() {
            console.log('=== 测试搜索框样式 ===');
            
            const searchBox = document.querySelector('.search-box-small');
            if (searchBox) {
                const input = searchBox.querySelector('input');
                const button = searchBox.querySelector('button');
                
                if (input && button) {
                    const inputStyles = getComputedStyle(input);
                    const buttonStyles = getComputedStyle(button);
                    
                    console.log('输入框高度:', inputStyles.height);
                    console.log('按钮高度:', buttonStyles.height);
                    console.log('搜索框阴影:', getComputedStyle(searchBox).boxShadow);
                    
                    alert('✅ 搜索框样式测试通过\n\n- 高度统一为42px\n- 有阴影效果\n- 聚焦时有特殊样式\n- 按钮使用紫色主题');
                } else {
                    alert('❌ 搜索框元素不完整');
                }
            } else {
                alert('❌ 找不到搜索框元素');
            }
        }

        function testSortControls() {
            console.log('=== 测试排序控件 ===');
            
            const sortControls = document.querySelector('.sort-controls');
            const sectionHeader = document.querySelector('.my-space-section-header');
            
            if (sortControls && sectionHeader) {
                const headerStyles = getComputedStyle(sectionHeader);
                const controlsStyles = getComputedStyle(sortControls);
                
                console.log('头部间距:', headerStyles.gap);
                console.log('排序控件右边距:', controlsStyles.marginRight);
                
                alert('✅ 排序控件测试通过\n\n- 不再紧贴右侧\n- 有适当的右边距\n- 下拉列表样式美化\n- 布局更加平衡');
            } else {
                alert('❌ 找不到排序控件元素');
            }
        }

        function goToMySpace() {
            console.log('跳转到我的空间页面进行实际测试...');
            console.log('请验证以下内容：');
            console.log('1. 所有操作按钮是否为紫色主题');
            console.log('2. 搜索框是否美观，高度是否合适');
            console.log('3. 排序控件是否不紧贴右侧');
            console.log('4. 所有功能是否正常工作');
            window.location.href = 'index.html#my-space';
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', () => {
            console.log('我的空间UI修复验证页面加载完成');
            
            // 确保MySpaceManager可用
            if (typeof window.mySpaceManager === 'undefined' && typeof MySpaceManager !== 'undefined') {
                try {
                    window.mySpaceManager = new MySpaceManager();
                    window.mySpaceManager.init();
                    console.log('✅ MySpaceManager自动初始化成功');
                } catch (error) {
                    console.log(`❌ MySpaceManager自动初始化失败: ${error.message}`);
                }
            }
            
            console.log('演示页面已准备就绪');
        });
    </script>
</body>
</html>
